<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>甲骨文-人</title>

<!-- 載入 A-Frame 和 MindAR（注意：URL 不能換行！） -->
<script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
</head>

<body>
<!-- A-Frame 場景設定 -->
<a-scene
  mindar-image="imageTargetSrc: /lobby/jiagu-ren.mind; autoStart: true; uiScanning: true;"
  color-space="sRGB"
  renderer="colorManagement: true; physicallyCorrectLights: true"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false">

<!-- 載入影片資源 -->
<a-assets>
  <!-- muted 確保手機自動播放允許 -->
  <video id="introVid" src="/jiagu-video/jiagu-ren.mp4" preload="auto" loop muted playsinline></video>
</a-assets>

<!-- 掃描後影片 -->
<a-entity mindar-image-target="targetIndex: 0">
  <a-video
    id="videoEntity"
    src="#introVid"
    width="1.2"
    height="0.7"
    autoplay="false"
    loop="true"
    material="shader: flat"
    position="0 0 0.01"> <!-- 避免黑屏被 camera clipping 擋住 -->
  </a-video>
</a-entity>

<!-- 互動邏輯 -->
<script>
window.addEventListener('DOMContentLoaded', () => {
  const video = document.querySelector('#introVid');
  const videoPlane = document.querySelector('#videoEntity');
  const targetEntity = document.querySelector('a-entity[mindar-image-target]');

  // 點擊影片暫停/播放
  videoPlane.addEventListener('click', () => {
    if (video.paused) video.play();
    else video.pause();
  });

  // 掃描到 marker 時播放影片
  targetEntity.addEventListener('targetFound', () => {
    if (video.readyState >= 3) { // 確保影片可以播放
      video.play();
    } else {
      video.oncanplay = () => video.play();
    }
  });

  // 掃描不到 marker 時暫停並重置
  targetEntity.addEventListener('targetLost', () => {
    video.pause();
    video.currentTime = 0;
  });
});
</script>


<!-- 返回首頁按鈕 -->
<style>
  #backHomeBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    cursor: pointer;
    z-index: 9999;
  }
</style>

<a href="https://sites.google.com/view/hanzilab" target="_top">
  <img id="backHomeBtn" src="/lobby/LOGO去背.png" style="width: 300px; height: auto;">
</a>

</body>
</html>





